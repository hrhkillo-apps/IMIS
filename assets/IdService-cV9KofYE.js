import{w as f,d as o,a as i,g as n,c as h}from"./index-CaLk5RpC.js";const c={TICKET:"imis_history_ticket",FTR:"imis_history_ftr",REG:"imis_history_reg",AADHAR:"imis_history_aadhar"},g={getAllIds:async()=>{try{const r={ticket:new Set,ftr:new Set,reg:new Set,aadhar:new Set},[t,e,a,d]=await Promise.all([n(h(o,c.TICKET)),n(h(o,c.FTR)),n(h(o,c.REG)),n(h(o,c.AADHAR))]);return t.forEach(s=>r.ticket.add(s.id)),e.forEach(s=>r.ftr.add(s.id)),a.forEach(s=>r.reg.add(s.id)),d.forEach(s=>r.aadhar.add(s.id)),r}catch(r){throw console.error("ID Fetch Error:",r),new Error("Could not fetch ID history. Ensure you are online for first run or have cached data.")}},saveBatch:async r=>{try{const t=f(o);return r.ticket?.forEach(e=>{const a=i(o,c.TICKET,String(e));t.set(a,{createdAt:new Date})}),r.ftr?.forEach(e=>{const a=i(o,c.FTR,String(e));t.set(a,{createdAt:new Date})}),r.reg?.forEach(e=>{const a=i(o,c.REG,String(e));t.set(a,{createdAt:new Date})}),r.aadhar?.forEach(e=>{const a=i(o,c.AADHAR,String(e));t.set(a,{createdAt:new Date})}),await t.commit(),{success:!0}}catch(t){return console.error("Error saving batch to Firebase:",t),{success:!1,error:t.message}}}};export{g as IdService};
