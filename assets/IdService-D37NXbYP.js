import{w as f,d as o,a as i,g as n,c as h}from"./index-pGDm1HXJ.js";const c={TICKET:"imis_history_ticket",FTR:"imis_history_ftr",REG:"imis_history_reg",AADHAR:"imis_history_aadhar"},g={getAllIds:async()=>{try{const t={ticket:new Set,ftr:new Set,reg:new Set,aadhar:new Set},[r,e,a,d]=await Promise.all([n(h(o,c.TICKET)),n(h(o,c.FTR)),n(h(o,c.REG)),n(h(o,c.AADHAR))]);return r.forEach(s=>t.ticket.add(s.id)),e.forEach(s=>t.ftr.add(s.id)),a.forEach(s=>t.reg.add(s.id)),d.forEach(s=>t.aadhar.add(s.id)),t}catch(t){throw console.error("Critical Error: Failed to connect to Firebase:",t),new Error("CONNECTION_FAILED: Could not fetch ID history. Check internet or Firebase config.")}},saveBatch:async t=>{try{const r=f(o);return t.ticket?.forEach(e=>{const a=i(o,c.TICKET,String(e));r.set(a,{createdAt:new Date})}),t.ftr?.forEach(e=>{const a=i(o,c.FTR,String(e));r.set(a,{createdAt:new Date})}),t.reg?.forEach(e=>{const a=i(o,c.REG,String(e));r.set(a,{createdAt:new Date})}),t.aadhar?.forEach(e=>{const a=i(o,c.AADHAR,String(e));r.set(a,{createdAt:new Date})}),await r.commit(),{success:!0}}catch(r){return console.error("Error saving batch to Firebase:",r),{success:!1,error:r.message}}}};export{g as IdService};
