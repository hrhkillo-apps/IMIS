import{s as r}from"./index-BhYPu59s.js";const i={TICKET:"imis_history_ticket",FTR:"imis_history_ftr",REG:"imis_history_reg"},o=t=>[...t],c=t=>new Set(t),S={loadHistory:()=>{try{const t=r.getItem(i.TICKET),e=r.getItem(i.FTR),s=r.getItem(i.REG);return{ticket:t?c(JSON.parse(t)):new Set,ftr:e?c(JSON.parse(e)):new Set,reg:s?c(JSON.parse(s)):new Set}}catch(t){return console.error("Failed to load ID history:",t),{ticket:new Set,ftr:new Set,reg:new Set}}},saveBatch:t=>{try{const e=S.loadHistory();t.ticket.size>0&&(t.ticket.forEach(s=>e.ticket.add(String(s))),r.setItem(i.TICKET,JSON.stringify(o(e.ticket)))),t.ftr.size>0&&(t.ftr.forEach(s=>e.ftr.add(String(s))),r.setItem(i.FTR,JSON.stringify(o(e.ftr)))),t.reg.size>0&&(t.reg.forEach(s=>e.reg.add(String(s))),r.setItem(i.REG,JSON.stringify(o(e.reg))))}catch(e){console.error("Failed to save ID history:",e)}},exportHistoryData:()=>{const t=S.loadHistory();return{ticket:o(t.ticket),ftr:o(t.ftr),reg:o(t.reg),timestamp:new Date().toISOString()}},importHistoryData:t=>{try{const e=JSON.parse(t);if(!e.ticket||!e.ftr||!e.reg)throw new Error("Invalid format");const s=new Set(e.ticket),a=new Set(e.ftr),n=new Set(e.reg);return r.setItem(i.TICKET,JSON.stringify([...s])),r.setItem(i.FTR,JSON.stringify([...a])),r.setItem(i.REG,JSON.stringify([...n])),{success:!0,count:s.size+a.size+n.size}}catch(e){return{success:!1,error:e.message}}},clearHistory:()=>{r.removeItem(i.TICKET),r.removeItem(i.FTR),r.removeItem(i.REG)}};export{S as IDStorage};
